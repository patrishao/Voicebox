<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Profile</title>
    <link rel="stylesheet" type="text/css" href="css/edit-profile.css" />


    <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="sweetalert2.all.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css" />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>



</head>

<body>
    <?php include 'includes/nav.php' ?>
    <?php include 'includes/db.php' ?>

    <script src="js/alert.js"> </script>


    <div class="container">


        <div class="holder">

            <p class="title">Edit profile</p>

            <?php include 'backend/edit-profdata.php' ?>

            <form method="post" action="edit-profile.php" enctype="multipart/form-data">

                <div class="photos">

                    <!-- coverphoto edit -->
                    <div class="coverphoto-container">
                        <img class="cover-img" src="<?php if (empty($_SESSION['userCoverPhoto'])) {
                                                        echo 'img/default-cover.jpg';
                                                    } else {
                                                        echo 'uploaded-imgs/' . $_SESSION['userCoverPhoto'];
                                                    }
                                                    ?>" id="coverDisplay">
                        <input type="file" id="cover-photo" name="coverPhoto" onchange="loadCover(event)" accept="image/png, image/jpeg" hidden />
                        <label for="cover-photo" class="cover-button">
                            <svg xmlns="http://www.w3.org/2000/svg" width="30" height="29" viewBox="0 0 30 29" fill="none">
                                <path d="M5 6.04167H21.25V14.5H23.75V6.04167C23.75 4.70887 22.6288 3.625 21.25 3.625H5C3.62125 3.625 2.5 4.70887 2.5 6.04167V20.5417C2.5 21.8745 3.62125 22.9583 5 22.9583H15V20.5417H5V6.04167Z" fill="white" />
                                <path d="M10 13.2917L6.25 18.125H20L15 10.875L11.25 15.7083L10 13.2917Z" fill="white" />
                                <path d="M23.75 16.9167H21.25V20.5417H17.5V22.9584H21.25V26.5834H23.75V22.9584H27.5V20.5417H23.75V16.9167Z" fill="white" />
                            </svg>
                            Edit cover photo</label>

                        <!-- profile photo edit -->
                        <!-- <div class="profphoto-container"> -->
                        <img src="<?php if (empty($_SESSION['userProfPhoto'])) {
                                        echo 'img/default-pic.jpg';
                                    } else {
                                        echo 'uploaded-imgs/' . $_SESSION['userProfPhoto'];
                                    }
                                    ?>" class="prof-photo" id="profileDisplay" />

                        <label for="prof-photo" class="prof-button">

                            <svg xmlns="http://www.w3.org/2000/svg" width="30" height="29" viewBox="0 0 30 29" fill="none">
                                <path d="M5 6.04167H21.25V14.5H23.75V6.04167C23.75 4.70887 22.6288 3.625 21.25 3.625H5C3.62125 3.625 2.5 4.70887 2.5 6.04167V20.5417C2.5 21.8745 3.62125 22.9583 5 22.9583H15V20.5417H5V6.04167Z" fill="white" />
                                <path d="M10 13.2917L6.25 18.125H20L15 10.875L11.25 15.7083L10 13.2917Z" fill="white" />
                                <path d="M23.75 16.9167H21.25V20.5417H17.5V22.9584H21.25V26.5834H23.75V22.9584H27.5V20.5417H23.75V16.9167Z" fill="white" />
                            </svg>
                            Upload
                        </label>

                        <input type="file" id="prof-photo" name="profPhoto" onChange="loadFile(event)" accept="image/png, image/jpeg, image/gif" hidden />
                        <!-- </div> -->



                    </div>
                </div>


                <div class="forms">


                    <div class="names">


                        <div class="name-holder">
                            <!-- name -->
                            <label for="name" class="name-label">Name</label> <br>
                            <input type="text" name="name" class="" value="<?php echo $_SESSION['nickname']; ?>" />
                        </div>

                        <div class="username-holder">
                            <!-- username -->
                            <label for="username" class="username-label">Username</label> <br>
                            <input type="text" name="username" class="" value="<?php echo $_SESSION['username']; ?>" />

                        </div>
                    </div>

                    <label for="bio" class="bio-label">Bio</label>
                    <textarea class="bio" name="bio"><?php if (!empty($_SESSION['bio'])) {
                                                            echo $_SESSION['bio'];
                                                        } ?></textarea>

                    <div class="passwords">

                        <div class="password-holder">


                            <!-- password -->
                            <label for="password" class="password-label">Confirm Password</label> <br>
                            <input type="password" name="password" class="" id="password1" />
                            <i class="bi bi-eye-slash togglePass" id="togglePassword1"></i>
                        </div>


                        <div class="confirmpass-holder">

                            <label for="confirm-pass" class="confirm-pass-label">Confirm Entered Password</label> <br>
                            <input type="password" name="confirmPass" class="" id="password2" />
                            <i class="bi bi-eye-slash togglePass" id="togglePassword2"></i>

                        </div>
                    </div>


                    <div class=" buttons">
                        <button class="cancel">
                            <svg xmlns="http://www.w3.org/2000/svg" width="13" height="12" viewBox="0 0 13 12" fill="none">
                                <g clip-path="url(#clip0_179_426)">
                                    <mask id="path-1-inside-1_179_426" fill="white">
                                        <path d="M0.42103 0.549737C0.505212 0.474072 0.605218 0.414039 0.715319 0.373079C0.825419 0.332119 0.943452 0.311035 1.06265 0.311035C1.18186 0.311035 1.29989 0.332119 1.40999 0.373079C1.52009 0.414039 1.6201 0.474072 1.70428 0.549737L6.50015 4.85111L11.296 0.549737C11.3803 0.474194 11.4803 0.41427 11.5904 0.373387C11.7005 0.332503 11.8185 0.311461 11.9377 0.311461C12.0568 0.311461 12.1748 0.332503 12.2849 0.373387C12.395 0.41427 12.495 0.474194 12.5793 0.549737C12.6635 0.62528 12.7304 0.714962 12.776 0.813664C12.8216 0.912365 12.845 1.01815 12.845 1.12499C12.845 1.23182 12.8216 1.33761 12.776 1.43631C12.7304 1.53501 12.6635 1.62469 12.5793 1.70024L7.78159 5.99999L12.5793 10.2997C12.6635 10.3753 12.7304 10.465 12.776 10.5637C12.8216 10.6624 12.845 10.7682 12.845 10.875C12.845 10.9818 12.8216 11.0876 12.776 11.1863C12.7304 11.285 12.6635 11.3747 12.5793 11.4502C12.495 11.5258 12.395 11.5857 12.2849 11.6266C12.1748 11.6675 12.0568 11.6885 11.9377 11.6885C11.8185 11.6885 11.7005 11.6675 11.5904 11.6266C11.4803 11.5857 11.3803 11.5258 11.296 11.4502L6.50015 7.14886L1.70428 11.4502C1.62002 11.5258 1.51999 11.5857 1.4099 11.6266C1.29981 11.6675 1.18182 11.6885 1.06265 11.6885C0.943494 11.6885 0.8255 11.6675 0.715409 11.6266C0.605319 11.5857 0.505289 11.5258 0.42103 11.4502C0.33677 11.3747 0.269932 11.285 0.224331 11.1863C0.17873 11.0876 0.15526 10.9818 0.15526 10.875C0.15526 10.7682 0.17873 10.6624 0.224331 10.5637C0.269932 10.465 0.33677 10.3753 0.42103 10.2997L5.21872 5.99999L0.42103 1.70024C0.336634 1.62476 0.269675 1.5351 0.223988 1.43639C0.178301 1.33768 0.154785 1.23186 0.154785 1.12499C0.154785 1.01812 0.178301 0.912293 0.223988 0.813582C0.269675 0.714872 0.336634 0.625211 0.42103 0.549737Z" />
                                    </mask>
                                    <path d="M0.42103 0.549737C0.505212 0.474072 0.605218 0.414039 0.715319 0.373079C0.825419 0.332119 0.943452 0.311035 1.06265 0.311035C1.18186 0.311035 1.29989 0.332119 1.40999 0.373079C1.52009 0.414039 1.6201 0.474072 1.70428 0.549737L6.50015 4.85111L11.296 0.549737C11.3803 0.474194 11.4803 0.41427 11.5904 0.373387C11.7005 0.332503 11.8185 0.311461 11.9377 0.311461C12.0568 0.311461 12.1748 0.332503 12.2849 0.373387C12.395 0.41427 12.495 0.474194 12.5793 0.549737C12.6635 0.62528 12.7304 0.714962 12.776 0.813664C12.8216 0.912365 12.845 1.01815 12.845 1.12499C12.845 1.23182 12.8216 1.33761 12.776 1.43631C12.7304 1.53501 12.6635 1.62469 12.5793 1.70024L7.78159 5.99999L12.5793 10.2997C12.6635 10.3753 12.7304 10.465 12.776 10.5637C12.8216 10.6624 12.845 10.7682 12.845 10.875C12.845 10.9818 12.8216 11.0876 12.776 11.1863C12.7304 11.285 12.6635 11.3747 12.5793 11.4502C12.495 11.5258 12.395 11.5857 12.2849 11.6266C12.1748 11.6675 12.0568 11.6885 11.9377 11.6885C11.8185 11.6885 11.7005 11.6675 11.5904 11.6266C11.4803 11.5857 11.3803 11.5258 11.296 11.4502L6.50015 7.14886L1.70428 11.4502C1.62002 11.5258 1.51999 11.5857 1.4099 11.6266C1.29981 11.6675 1.18182 11.6885 1.06265 11.6885C0.943494 11.6885 0.8255 11.6675 0.715409 11.6266C0.605319 11.5857 0.505289 11.5258 0.42103 11.4502C0.33677 11.3747 0.269932 11.285 0.224331 11.1863C0.17873 11.0876 0.15526 10.9818 0.15526 10.875C0.15526 10.7682 0.17873 10.6624 0.224331 10.5637C0.269932 10.465 0.33677 10.3753 0.42103 10.2997L5.21872 5.99999L0.42103 1.70024C0.336634 1.62476 0.269675 1.5351 0.223988 1.43639C0.178301 1.33768 0.154785 1.23186 0.154785 1.12499C0.154785 1.01812 0.178301 0.912293 0.223988 0.813582C0.269675 0.714872 0.336634 0.625211 0.42103 0.549737Z" fill="white" />
                                    <path d="M0.42103 0.549737L1.75425 2.04056L1.75799 2.0372L0.42103 0.549737ZM1.70428 0.549737L0.367319 2.0372L0.36891 2.03863L1.70428 0.549737ZM6.50015 4.85111L5.16478 6.34L6.50015 7.53768L7.83552 6.34L6.50015 4.85111ZM11.296 0.549737L9.96094 -0.939402L9.96066 -0.939151L11.296 0.549737ZM12.845 1.12499H10.845H12.845ZM12.5793 1.70024L13.9141 3.18963L13.9144 3.18938L12.5793 1.70024ZM7.78159 5.99999L6.44678 4.5106L4.78491 5.99999L6.44678 7.48938L7.78159 5.99999ZM12.5793 10.2997L13.9144 8.8106L13.9141 8.81035L12.5793 10.2997ZM12.845 10.875H10.845H12.845ZM11.9377 11.6885V9.68851V11.6885ZM11.296 11.4502L9.96066 12.9391L9.96094 12.9394L11.296 11.4502ZM6.50015 7.14886L7.83552 5.65997L6.50015 4.46229L5.16478 5.65997L6.50015 7.14886ZM1.70428 11.4502L3.03937 12.9394L3.03965 12.9391L1.70428 11.4502ZM1.06265 11.6885V9.68851V11.6885ZM0.42103 10.2997L-0.913781 8.81035L-0.91406 8.8106L0.42103 10.2997ZM5.21872 5.99999L6.55353 7.48938L8.2154 5.99999L6.55353 4.5106L5.21872 5.99999ZM0.42103 1.70024L1.75584 0.210847L1.75425 0.209422L0.42103 1.70024ZM1.75799 2.0372C1.64813 2.13594 1.52914 2.20424 1.41268 2.24756L0.0179586 -1.5014C-0.318704 -1.37616 -0.637704 -1.1878 -0.915931 -0.937723L1.75799 2.0372ZM1.41268 2.24756C1.29631 2.29085 1.17794 2.31104 1.06265 2.31104V-1.68896C0.708967 -1.68896 0.354526 -1.62662 0.0179586 -1.5014L1.41268 2.24756ZM1.06265 2.31104C0.947373 2.31104 0.828997 2.29085 0.712631 2.24756L2.10735 -1.5014C1.77078 -1.62662 1.41634 -1.68896 1.06265 -1.68896V2.31104ZM0.712631 2.24756C0.596169 2.20424 0.47718 2.13594 0.36732 2.0372L3.04124 -0.937723C2.76301 -1.1878 2.44401 -1.37616 2.10735 -1.5014L0.712631 2.24756ZM0.36891 2.03863L5.16478 6.34L7.83552 3.36222L3.03965 -0.939151L0.36891 2.03863ZM7.83552 6.34L12.6314 2.03863L9.96066 -0.939151L5.16478 3.36222L7.83552 6.34ZM12.6311 2.03888C12.5215 2.13717 12.4028 2.20515 12.2867 2.24828L10.8941 -1.5015C10.5578 -1.37661 10.2391 -1.18878 9.96094 -0.939402L12.6311 2.03888ZM12.2867 2.24828C12.1706 2.29137 12.0526 2.31146 11.9377 2.31146V-1.68854C11.5844 -1.68854 11.2304 -1.62636 10.8941 -1.5015L12.2867 2.24828ZM11.9377 2.31146C11.8227 2.31146 11.7047 2.29137 11.5886 2.24828L12.9812 -1.5015C12.6449 -1.62636 12.2909 -1.68854 11.9377 -1.68854V2.31146ZM11.5886 2.24828C11.4725 2.20515 11.3538 2.13717 11.2442 2.03888L13.9144 -0.939402C13.6362 -1.18878 13.3175 -1.37661 12.9812 -1.5015L11.5886 2.24828ZM11.2442 2.03888C11.1341 1.9402 11.0337 1.81111 10.9604 1.65248L14.5916 -0.0251545C14.4271 -0.38119 14.1929 -0.689643 13.9144 -0.939402L11.2442 2.03888ZM10.9604 1.65248C10.8867 1.49303 10.845 1.31305 10.845 1.12499H14.845C14.845 0.723256 14.7564 0.331705 14.5916 -0.0251545L10.9604 1.65248ZM10.845 1.12499C10.845 0.936924 10.8867 0.756949 10.9604 0.597492L14.5916 2.27513C14.7564 1.91827 14.845 1.52672 14.845 1.12499H10.845ZM10.9604 0.597492C11.0337 0.43886 11.1341 0.309771 11.2442 0.211098L13.9144 3.18938C14.1929 2.93962 14.4271 2.63116 14.5916 2.27513L10.9604 0.597492ZM11.2445 0.210847L6.44678 4.5106L9.1164 7.48938L13.9141 3.18963L11.2445 0.210847ZM6.44678 7.48938L11.2445 11.7891L13.9141 8.81035L9.1164 4.5106L6.44678 7.48938ZM11.2442 11.7889C11.1341 11.6902 11.0337 11.5611 10.9604 11.4025L14.5916 9.72484C14.4271 9.36881 14.1929 9.06036 13.9144 8.8106L11.2442 11.7889ZM10.9604 11.4025C10.8867 11.243 10.845 11.063 10.845 10.875H14.845C14.845 10.4733 14.7564 10.0817 14.5916 9.72484L10.9604 11.4025ZM10.845 10.875C10.845 10.6869 10.8867 10.5069 10.9604 10.3475L14.5916 12.0251C14.7564 11.6683 14.845 11.2767 14.845 10.875H10.845ZM10.9604 10.3475C11.0337 10.1889 11.1341 10.0598 11.2442 9.9611L13.9144 12.9394C14.1929 12.6896 14.4271 12.3812 14.5916 12.0251L10.9604 10.3475ZM11.2442 9.9611C11.3538 9.8628 11.4725 9.79482 11.5886 9.7517L12.9812 13.5015C13.3175 13.3766 13.6362 13.1888 13.9144 12.9394L11.2442 9.9611ZM11.5886 9.7517C11.7047 9.7086 11.8227 9.68851 11.9377 9.68851V13.6885C12.2909 13.6885 12.6449 13.6263 12.9812 13.5015L11.5886 9.7517ZM11.9377 9.68851C12.0526 9.68851 12.1706 9.7086 12.2867 9.7517L10.8941 13.5015C11.2304 13.6263 11.5844 13.6885 11.9377 13.6885V9.68851ZM12.2867 9.7517C12.4028 9.79482 12.5215 9.8628 12.6311 9.9611L9.96094 12.9394C10.2391 13.1888 10.5578 13.3766 10.8941 13.5015L12.2867 9.7517ZM12.6314 9.96135L7.83552 5.65997L5.16478 8.63775L9.96066 12.9391L12.6314 9.96135ZM5.16478 5.65997L0.36891 9.96135L3.03965 12.9391L7.83552 8.63775L5.16478 5.65997ZM0.36919 9.9611C0.478825 9.8628 0.597497 9.79482 0.713634 9.7517L2.10617 13.5015C2.44248 13.3766 2.76122 13.1888 3.03937 12.9394L0.36919 9.9611ZM0.713634 9.7517C0.829677 9.7086 0.947706 9.68851 1.06265 9.68851V13.6885C1.41592 13.6885 1.76994 13.6263 2.10617 13.5015L0.713634 9.7517ZM1.06265 9.68851C1.1776 9.68851 1.29563 9.7086 1.41168 9.7517L0.019143 13.5015C0.355367 13.6263 0.709385 13.6885 1.06265 13.6885V9.68851ZM1.41168 9.7517C1.52781 9.79482 1.64648 9.8628 1.75612 9.9611L-0.91406 12.9394C-0.635907 13.1888 -0.317174 13.3766 0.019143 13.5015L1.41168 9.7517ZM1.75612 9.9611C1.86618 10.0598 1.96664 10.1889 2.03993 10.3475L-1.59126 12.0251C-1.42677 12.3812 -1.19264 12.6896 -0.91406 12.9394L1.75612 9.9611ZM2.03993 10.3475C2.11359 10.5069 2.15526 10.6869 2.15526 10.875H-1.84474C-1.84474 11.2767 -1.75613 11.6683 -1.59126 12.0251L2.03993 10.3475ZM2.15526 10.875C2.15526 11.0631 2.11359 11.243 2.03993 11.4025L-1.59126 9.72484C-1.75613 10.0817 -1.84474 10.4732 -1.84474 10.875H2.15526ZM2.03993 11.4025C1.96664 11.5611 1.86618 11.6902 1.75612 11.7889L-0.91406 8.8106C-1.19264 9.06036 -1.42677 9.36881 -1.59126 9.72484L2.03993 11.4025ZM1.75584 11.7891L6.55353 7.48938L3.88391 4.5106L-0.913781 8.81035L1.75584 11.7891ZM6.55353 4.5106L1.75584 0.210847L-0.913781 3.18963L3.88391 7.48938L6.55353 4.5106ZM1.75425 0.209422C1.86465 0.30815 1.96545 0.437408 2.03901 0.596338L-1.59104 2.27645C-1.4261 2.6328 -1.19138 2.94138 -0.912189 3.19105L1.75425 0.209422ZM2.03901 0.596338C2.11295 0.756097 2.15479 0.936477 2.15479 1.12499H-1.84521C-1.84521 1.52724 -1.75635 1.91926 -1.59104 2.27645L2.03901 0.596338ZM2.15479 1.12499C2.15479 1.3135 2.11295 1.49388 2.03901 1.65364L-1.59104 -0.0264713C-1.75635 0.330709 -1.84521 0.722734 -1.84521 1.12499H2.15479ZM2.03901 1.65364C1.96545 1.81257 1.86465 1.94182 1.75425 2.04055L-0.912189 -0.941078C-1.19138 -0.691401 -1.4261 -0.382823 -1.59104 -0.0264713L2.03901 1.65364Z" fill="white" mask="url(#path-1-inside-1_179_426)" />
                                </g>
                                <defs>
                                    <clipPath id="clip0_179_426">
                                        <rect width="12.6903" height="11.3775" fill="white" transform="translate(0.154785 0.311035)" />
                                    </clipPath>
                                </defs>
                            </svg>
                            <p>Cancel</p>
                        </button>

                        <button type="submit" class="save" name="save">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                                <path d="M5 11L11 17L21 7" stroke="white" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" />
                            </svg>
                            <p>Save Changes</p>
                        </button>


                    </div>

                </div>




            </form>

        </div>

    </div>

    <script>
        // to display the images temporarily
        var loadFile = function(event) {
            var profileDisplay = document.getElementById('profileDisplay');
            profileDisplay.src = URL.createObjectURL(event.target.files[0]);
            profileDisplay.onload = function() {
                URL.revokeObjectURL(output.src) // free memory
            }
        };

        var loadCover = function(event) {
            var coverDisplay = document.getElementById('coverDisplay');
            coverDisplay.src = URL.createObjectURL(event.target.files[0]);
            coverDisplay.onload = function() {
                URL.revokeObjectURL(output.src) // free memory
            }
        };

        // toggle pass
        const togglePassword = document.querySelector("#togglePassword1");
        const password = document.querySelector("#password1");

        togglePassword.addEventListener("click", function() {
            // toggle the type attribute
            const type = password.getAttribute("type") === "password" ? "text" : "password";
            password.setAttribute("type", type);

            // toggle the icon
            this.classList.toggle("bi-eye");
        });

        const togglePassword2 = document.querySelector("#togglePassword2");
        const password2 = document.querySelector("#password2");

        togglePassword2.addEventListener("click", function() {
            // toggle the type attribute
            const type = password2.getAttribute("type") === "password" ? "text" : "password";
            password2.setAttribute("type", type);

            // toggle the icon
            this.classList.toggle("bi-eye");
        });
    </script>
</body>

</html>